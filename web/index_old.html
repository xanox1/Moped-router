<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Moped Router</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
          crossorigin=""/>
    <!-- Tailwind CSS CDN for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Local CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="map-container" class="relative w-full h-full">
        <!-- Map Background -->
        <div id="map" class="absolute inset-0"></div>

        <!-- Simulated GPS Dot -->
        <div id="gps-dot" class="absolute w-4 h-4 bg-blue-400 rounded-full border-2 border-white shadow-lg" style="top: 50%; left: 50%; transform: translate(-50%, -50%);"></div>

        <!-- Top Search Bar -->
        <header id="search-header" class="absolute top-0 left-0 right-0 p-4 z-10 transition-transform duration-300">
            <div class="max-w-md mx-auto">
                 <div class="bg-white/90 backdrop-blur-sm rounded-2xl shadow-lg p-2 text-gray-800 flex items-center space-x-2">
                    <div class="flex flex-col items-center px-2 self-stretch">
                         <div class="w-2.5 h-2.5 bg-gray-500 rounded-full mt-3"></div>
                         <div class="w-px flex-grow bg-gray-300 my-1.5"></div>
                         <div class="w-2.5 h-2.5 bg-blue-500 rounded-full mb-3"></div>
                    </div>
                    <div class="flex-grow space-y-1">
                        <input id="start" type="text" value="Current Location" class="w-full bg-transparent text-gray-600 py-1.5 focus:outline-none placeholder-gray-500">
                        <hr class="border-gray-200">
                        <input id="end" type="text" placeholder="Where to?" class="w-full bg-transparent text-gray-900 font-semibold py-1.5 focus:outline-none placeholder-gray-500">
                    </div>
                </div>
            </div>
        </header>
        
        <!-- Navigation Header (hidden by default) -->
        <div id="navigation-header" class="absolute top-0 left-0 right-0 p-4 z-20 bg-blue-600 shadow-lg text-white transform -translate-y-full ui-card">
            <div class="max-w-md mx-auto text-center">
                <p class="text-lg font-semibold">In 200m, turn right</p>
                <p class="text-2xl font-bold">Main Street</p>
            </div>
        </div>

        <!-- Floating Action Buttons -->
        <div id="action-buttons" class="absolute bottom-24 right-4 z-10 flex flex-col items-center space-y-3">
            <!-- Report Button Container -->
            <div id="report-container" class="report-container flex flex-col items-center space-y-3">
                <div id="report-options" class="flex flex-col items-center space-y-3">
                    <button class="report-option bg-white/90 backdrop-blur-sm w-12 h-12 rounded-full shadow-lg flex items-center justify-center hover:bg-gray-200 transition" data-report-type="Map Error">
                        <!-- Icon for map error -->
                        <svg class="w-6 h-6 text-orange-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16.862 4.487l1.687-1.688a1.875 1.875 0 112.652 2.652L10.582 16.07a4.5 4.5 0 01-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 011.13-1.897l8.932-8.931zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0115.75 21H5.25A2.25 2.25 0 013 18.75V8.25A2.25 2.25 0 015.25 6H10"></path></svg>
                    </button>
                    <button class="report-option bg-white/90 backdrop-blur-sm w-12 h-12 rounded-full shadow-lg flex items-center justify-center hover:bg-gray-200 transition" data-report-type="Police">
                        <!-- Icon for police -->
                         <svg class="w-7 h-7 text-blue-600" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"></path></svg>
                    </button>
                </div>
                <button id="report-main-button" class="bg-red-500 text-white w-14 h-14 rounded-full shadow-lg flex items-center justify-center hover:bg-red-600 transition transform hover:scale-110">
                    <svg class="w-7 h-7" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15"></path></svg>
                </button>
            </div>
             <button id="layers-menu-button" class="bg-white/90 backdrop-blur-sm text-gray-800 w-12 h-12 rounded-full shadow-lg flex items-center justify-center hover:bg-gray-200 transition">
                <svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"></path></svg>
            </button>
        </div>

        <!-- Route Information Card (Initially hidden) -->
        <div id="route-info" class="absolute bottom-0 left-0 right-0 p-4 z-20 ui-card hidden-card">
             <div class="max-w-md mx-auto bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl p-5 text-gray-800">
                <div class="flex justify-between items-center mb-3">
                    <div>
                        <h2 class="font-bold text-xl">Central Park</h2>
                        <p class="text-sm text-gray-500">Fastest moped route</p>
                    </div>
                    <button id="close-route-info" class="text-gray-400 hover:text-gray-800">
                         <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                    </button>
                </div>
                <div class="flex justify-around items-center text-center my-4">
                    <div><p class="font-bold text-2xl">15</p><p class="text-xs text-gray-500">MIN</p></div>
                    <div class="text-blue-500"><svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 4.17 4.42 9.92 6.24 12.11.4.48 1.13.48 1.53 0C14.58 18.92 19 13.17 19 9c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"></path></svg></div>
                    <div><p class="font-bold text-2xl">5.2</p><p class="text-xs text-gray-500">KM</p></div>
                </div>
                <button id="start-nav-button" class="w-full bg-blue-500 text-white font-bold py-3 rounded-xl hover:bg-blue-600 transition">Start Navigation</button>
             </div>
        </div>

        <!-- Navigation Info Footer (hidden by default) -->
        <div id="navigation-footer" class="absolute bottom-0 left-0 right-0 p-4 z-20 ui-card hidden-card">
            <div class="max-w-md mx-auto bg-white/90 backdrop-blur-sm rounded-2xl shadow-2xl p-4 text-gray-800 flex justify-between items-center">
                 <div>
                    <p class="text-sm text-gray-500">ETA</p>
                    <p id="eta" class="font-bold text-lg">11:19 AM</p>
                </div>
                <div>
                    <p id="nav-time" class="font-bold text-lg">14 min</p>
                    <p id="nav-dist" class="text-sm text-gray-500">4.8 km</p>
                </div>
                <button id="end-nav-button" class="bg-red-500 text-white font-semibold py-3 px-5 rounded-lg hover:bg-red-600 transition">End</button>
            </div>
        </div>

        <!-- Bottom Navigation Bar -->
        <footer id="bottom-nav" class="absolute bottom-0 left-0 right-0 z-10 transition-transform duration-300">
            <div class="max-w-md mx-auto bg-white/90 backdrop-blur-sm rounded-t-2xl shadow-2xl px-4 py-2">
                <nav class="flex justify-around items-center text-gray-500">
                    <a href="#" id="home-button" class="text-center p-2 rounded-lg hover:bg-gray-200/70 transition-colors nav-item active">
                        <svg class="w-6 h-6 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h7.5"></path></svg>
                        <span class="text-xs font-medium">Home</span>
                    </a>
                    <a href="#" id="saved-menu-button" class="text-center p-2 rounded-lg hover:bg-gray-200/70 transition-colors nav-item">
                        <svg class="w-6 h-6 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M17.593 3.322c1.1.128 1.907 1.077 1.907 2.185V21L12 17.5 4.5 21V5.507c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0111.186 0z"></path></svg>
                        <span class="text-xs font-medium">Saved</span>
                    </a>
                    <a href="#" id="recents-menu-button" class="text-center p-2 rounded-lg hover:bg-gray-200/70 transition-colors nav-item">
                        <svg class="w-6 h-6 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                        <span class="text-xs font-medium">Recents</span>
                    </a>
                     <a href="#" id="profile-menu-button" class="text-center p-2 rounded-lg hover:bg-gray-200/70 transition-colors nav-item">
                        <svg class="w-6 h-6 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"></path></svg>
                        <span class="text-xs font-medium">Profile</span>
                    </a>
                    <a href="#" id="settings-menu-button" class="text-center p-2 rounded-lg hover:bg-gray-200/70 transition-colors nav-item">
                       <svg class="w-6 h-6 mx-auto" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.324.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 011.37.49l1.296 2.247a1.125 1.125 0 01-.26 1.431l-1.003.827c-.293.24-.438.613-.438.995s.145.755.438.995l1.003.827c.48.398.668 1.03.26 1.431l-1.296 2.247a1.125 1.125 0 01-1.37.49l-1.217-.456c-.355-.133-.75-.072-1.075.124a6.57 6.57 0 01-.22.127c-.331.185-.581.496-.645.87l-.213 1.281c-.09.543-.56.94-1.11.94h-2.593c-.55 0-1.02-.398-1.11-.94l-.213-1.281c-.063-.374-.313-.686-.645-.87a6.52 6.52 0 01-.22-.127c-.324-.196-.72-.257-1.075-.124l-1.217.456a1.125 1.125 0 01-1.37-.49l-1.296-2.247a1.125 1.125 0 01.26-1.431l1.004-.827c.292-.24.437-.613.437-.995s-.145-.755-.438-.995l-1.004-.827a1.125 1.125 0 01-.26-1.431l1.296-2.247a1.125 1.125 0 011.37-.49l1.217.456c.355.133.75.072 1.075.124a6.553 6.553 0 01.22-.127c.332-.185.582-.496.645-.87l.213-1.281z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        <span class="text-xs font-medium">Settings</span>
                    </a>
                </nav>
            </div>
        </footer>
    </div>

    <!-- MODALS AND MENUS -->
    <div id="generic-modal" class="absolute inset-0 z-30 flex items-center justify-center p-4 hidden-modal pointer-events-none">
        <div class="modal-overlay absolute inset-0 bg-black/50"></div>
        <div class="modal-content bg-white text-gray-800 rounded-2xl shadow-xl w-full max-w-md mx-auto p-6 relative transform transition-transform duration-300">
            <div class="flex justify-between items-center mb-4">
                <h2 id="modal-title" class="text-2xl font-bold">Modal Title</h2>
                <button id="modal-close-button" class="text-gray-400 hover:text-gray-800">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div id="modal-body">
                <!-- Modal content goes here -->
            </div>
        </div>
    </div>
    <div id="layers-menu" class="absolute inset-0 z-30 hidden-modal pointer-events-none">
        <div class="modal-overlay absolute inset-0 bg-black/50"></div>
        <div class="modal-content absolute top-0 right-0 h-full bg-white text-gray-800 rounded-l-2xl shadow-xl w-full max-w-sm p-6 transform translate-x-full transition-transform duration-300">
             <div class="flex justify-between items-center mb-6">
                <h2 class="text-2xl font-bold">Map Style</h2>
                <button id="layers-close-button" class="text-gray-400 hover:text-gray-800">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
                </button>
            </div>
            <div class="space-y-4">
                <button class="map-style-button w-full text-left p-3 rounded-lg hover:bg-gray-100 transition" data-style="default">Default</button>
                <button class="map-style-button w-full text-left p-3 rounded-lg hover:bg-gray-100 transition" data-style="satellite">Satellite</button>
                <button class="map-style-button w-full text-left p-3 rounded-lg hover:bg-gray-100 transition" data-style="terrain">Terrain</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="absolute top-5 right-5 bg-green-500 text-white py-2 px-5 rounded-lg shadow-lg opacity-0 transform translate-x-10 z-50">
        Report submitted!
    </div>

    <!-- Legacy elements for functionality compatibility -->
    <div id="getRouteBtn" style="display: none;"></div>
    <div id="clearRouteBtn" style="display: none;"></div>
    <div id="testApiBtn" style="display: none;"></div>
    <div id="api-status-indicator" style="display: none;"></div>
    <div id="error-message" style="display: none;"></div>
    
    <!-- Context Menu -->
    <div id="context-menu" class="context-menu" style="display: none;">
        <div class="context-menu-item" data-action="directions-from">
            <span class="context-menu-icon">📍</span>
            Directions from here
        </div>
        <div class="context-menu-item" data-action="directions-to">
            <span class="context-menu-icon">🎯</span>
            Directions to here
        </div>
        <div class="context-menu-separator"></div>
        <div class="context-menu-item" data-action="show-address">
            <span class="context-menu-icon">📍</span>
            Show address
        </div>
        <div class="context-menu-item" data-action="query-features">
            <span class="context-menu-icon">🔍</span>
            Query features
        </div>
    </div>
    
    <!-- Feature Information Modal -->
    <div id="feature-modal" class="feature-modal" style="display: none;">
        <div class="feature-modal-content">
            <div class="feature-modal-header">
                <h3>Feature Information</h3>
                <span class="feature-modal-close">&times;</span>
            </div>
            <div class="feature-modal-body" id="feature-modal-body">
                <!-- Feature information will be populated here -->
            </div>
        </div>
    </div>
    
    <!-- Settings Modal -->
    <div id="settings-modal" class="settings-modal" style="display: none;">
        <div class="settings-modal-content">
            <div class="settings-modal-header">
                <h3>⚙️ Settings</h3>
                <span class="settings-modal-close">&times;</span>
            </div>
            <div class="settings-modal-body">
                <h4>Show/Hide Sections</h4>
                <div class="settings-options">
                    <label class="setting-item">
                        <input type="checkbox" id="setting-api-status" checked>
                        <span class="checkmark"></span>
                        🌐 API Status
                    </label>
                    <label class="setting-item">
                        <input type="checkbox" id="setting-user-section" checked>
                        <span class="checkmark"></span>
                        😊 User Account & Emoticons
                    </label>
                    <label class="setting-item">
                        <input type="checkbox" id="setting-community-section" checked>
                        <span class="checkmark"></span>
                        🚨 Community Reporting
                    </label>
                    <label class="setting-item">
                        <input type="checkbox" id="setting-achievements-section" checked>
                        <span class="checkmark"></span>
                        🏆 Achievements
                    </label>
                    <label class="setting-item">
                        <input type="checkbox" id="setting-community-stats" checked>
                        <span class="checkmark"></span>
                        📊 Community Stats
                    </label>
                </div>
            </div>
        </div>
    </div>
            <div class="header-section">
                <h1>Moped Router</h1>
                <button id="menu-btn" class="menu-btn" title="Menu">
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                    <span class="hamburger-line"></span>
                </button>
            </div>
            
            <!-- Navigation Menu -->
            <nav id="nav-menu" class="nav-menu" style="display: none;">
                <div class="nav-section">
                    <h3 class="nav-title">Account</h3>
                    <a href="#" class="nav-item" data-action="login">
                        <span class="nav-icon">👤</span>
                        <span>Sign In</span>
                    </a>
                    <a href="#" class="nav-item" data-action="signup">
                        <span class="nav-icon">📝</span>
                        <span>Sign Up</span>
                    </a>
                    <a href="#" class="nav-item" data-action="profile">
                        <span class="nav-icon">⚙️</span>
                        <span>Profile Settings</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <h3 class="nav-title">Application</h3>
                    <a href="#" class="nav-item" data-action="app-settings">
                        <span class="nav-icon">🔧</span>
                        <span>App Settings</span>
                    </a>
                    <a href="#" class="nav-item" data-action="preferences">
                        <span class="nav-icon">🎛️</span>
                        <span>Preferences</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <h3 class="nav-title">Help & Info</h3>
                    <a href="#" class="nav-item" data-action="about">
                        <span class="nav-icon">ℹ️</span>
                        <span>About</span>
                    </a>
                    <a href="#" class="nav-item" data-action="help">
                        <span class="nav-icon">❓</span>
                        <span>Help & Support</span>
                    </a>
                    <a href="#" class="nav-item" data-action="privacy">
                        <span class="nav-icon">🔒</span>
                        <span>Privacy Policy</span>
                    </a>
                </div>
            </nav>
            
            <!-- User Profile Section -->
            <div class="user-section" id="user-section">
                <div class="profile-container">
                    <div class="profile-avatar">
                        <div class="avatar-circle">
                            <span class="avatar-initials">R</span>
                        </div>
                    </div>
                    <div class="profile-info">
                        <span class="username">Rider #123</span>
                        <div class="user-stats">
                            <span class="stat-value">1,247</span>
                            <span class="stat-label">Points</span>
                        </div>
                    </div>
                </div>
            </div>
            <div class="input-group">
                <label for="start">From</label>
                <div class="input-with-button">
                    <button class="map-select-btn" id="start-select-btn" title="Click to select starting point on map">📍</button>
                    <input type="text" id="start" value="" placeholder="e.g., Amsterdam Central Station or 52.3702,4.8952">
                </div>
                <small class="field-hint">Click the pin button or input field, then click on the map to set coordinates</small>
            </div>
            <div class="input-group">
                <label for="end">To</label>
                <div class="input-with-button">
                    <button class="map-select-btn" id="end-select-btn" title="Click to select destination on map">🎯</button>
                    <input type="text" id="end" value="" placeholder="e.g., Utrecht Centraal or 52.0907,5.1214">
                </div>
                <small class="field-hint">Click the pin button or input field, then click on the map to set coordinates</small>
            </div>



            <button id="getRouteBtn">Get Route</button>
            <button id="clearRouteBtn">Clear Route</button>
            
            <!-- Community Reporting Section -->
            <div class="community-section" id="community-section">
                <h3>Report Road Conditions</h3>
                <div class="report-grid">
                    <button class="report-btn traffic-btn" data-type="traffic">
                        <span class="report-icon">🚗</span>
                        <span class="report-text">Traffic</span>
                        <span class="points-badge">+5</span>
                    </button>
                    <button class="report-btn police-btn" data-type="police">
                        <span class="report-icon">👮</span>
                        <span class="report-text">Police</span>
                        <span class="points-badge">+10</span>
                    </button>
                    <button class="report-btn hazard-btn" data-type="hazard">
                        <span class="report-icon">⚠️</span>
                        <span class="report-text">Hazard</span>
                        <span class="points-badge">+15</span>
                    </button>
                </div>
            </div>
            
            <div class="api-status" id="api-status">
                <label>API Status:</label>
                <span id="api-status-indicator" class="status-indicator unknown">Unknown</span>
                <button id="testApiBtn">Test API</button>
            </div>

            <div id="route-info"></div>
            <div id="error-message" class="error"></div>
            
            <!-- Achievement Section -->
            <div class="achievements-section" id="achievements-section">
                <h3>Recent Achievements</h3>
                <div class="achievement-grid">
                    <div class="achievement-card earned" title="First Route Planned">
                        <div class="achievement-icon">🗺️</div>
                        <div class="achievement-name">Navigator</div>
                    </div>
                    <div class="achievement-card earned" title="Community Helper">
                        <div class="achievement-icon">🤝</div>
                        <div class="achievement-name">Helper</div>
                    </div>
                    <div class="achievement-card locked" title="Speed Demon - 100 routes">
                        <div class="achievement-icon">🏎️</div>
                        <div class="achievement-name">Speed Demon</div>
                    </div>
                    <div class="achievement-card locked" title="Explorer - 10 cities">
                        <div class="achievement-icon">🌍</div>
                        <div class="achievement-name">Explorer</div>
                    </div>
                </div>
            </div>
            
            <!-- Community Stats -->
            <div class="community-stats" id="community-stats">
                <h3>Community Activity</h3>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-number">42</div>
                        <div class="stat-label">Reports Today</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-number">1,337</div>
                        <div class="stat-label">Active Riders</div>
                    </div>
                </div>
            </div>
        </div>
        <div id="map"></div>
        
        <!-- Context Menu -->
        <div id="context-menu" class="context-menu" style="display: none;">
            <div class="context-menu-item" data-action="directions-from">
                <span class="context-menu-icon">📍</span>
                Directions from here
            </div>
            <div class="context-menu-item" data-action="directions-to">
                <span class="context-menu-icon">🎯</span>
                Directions to here
            </div>
            <div class="context-menu-separator"></div>
            <div class="context-menu-item" data-action="show-address">
                <span class="context-menu-icon">📍</span>
                Show address
            </div>
            <div class="context-menu-item" data-action="query-features">
                <span class="context-menu-icon">🔍</span>
                Query features
            </div>
        </div>
        
        <!-- Feature Information Modal -->
        <div id="feature-modal" class="feature-modal" style="display: none;">
            <div class="feature-modal-content">
                <div class="feature-modal-header">
                    <h3>Feature Information</h3>
                    <span class="feature-modal-close">&times;</span>
                </div>
                <div class="feature-modal-body" id="feature-modal-body">
                    <!-- Feature information will be populated here -->
                </div>
            </div>
        </div>
        
        <!-- Settings Modal -->
        <div id="settings-modal" class="settings-modal" style="display: none;">
            <div class="settings-modal-content">
                <div class="settings-modal-header">
                    <h3>⚙️ Settings</h3>
                    <span class="settings-modal-close">&times;</span>
                </div>
                <div class="settings-modal-body">
                    <h4>Show/Hide Sections</h4>
                    <div class="settings-options">
                        <label class="setting-item">
                            <input type="checkbox" id="setting-api-status" checked>
                            <span class="checkmark"></span>
                            🌐 API Status
                        </label>
                        <label class="setting-item">
                            <input type="checkbox" id="setting-user-section" checked>
                            <span class="checkmark"></span>
                            😊 User Account & Emoticons
                        </label>
                        <label class="setting-item">
                            <input type="checkbox" id="setting-community-section" checked>
                            <span class="checkmark"></span>
                            🚨 Community Reporting
                        </label>
                        <label class="setting-item">
                            <input type="checkbox" id="setting-achievements-section" checked>
                            <span class="checkmark"></span>
                            🏆 Achievements
                        </label>
                        <label class="setting-item">
                            <input type="checkbox" id="setting-community-stats" checked>
                            <span class="checkmark"></span>
                            📊 Community Stats
                        </label>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Leaflet JavaScript -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <!-- Local JavaScript -->
    <script src="script.js"></script>
</body>
</html>
